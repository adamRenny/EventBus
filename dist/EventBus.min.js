/**
 * EventBus Module
 * Copyright (c) 2012-2013 Adam Ranfelt
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without restriction,
 * including without limitation the rights to use, copy, modify, merge,
 * publish, distribute, sublicense, and/or sell copies of the Software,
 * and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(b,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a():b.EventBus=a()}(this,function(){"use strict";var i,e,a,g,f,b,h,c,d=-1;return"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(d,a){var b,c=this.length;if(!c)return-1;if(a=Number(a),("number"!=typeof a||isNaN(a))&&(a=0),a>=c)return-1;for(0>a&&(a=c-Math.abs(a)),b=a;c>b;b++)if(this[b]===d)return b;return-1}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b,d,c,e;if("function"!=typeof this)throw new TypeError("Target is not callable, and unable to be bound");return b=Array.prototype.slice,d=b.call(arguments,1),c=this,"undefined"==typeof a&&(a=c),e=function(){var e=b.call(arguments,0);return c.apply(a,d.concat(e))}}),i=this,e=function(a){this.name=a,this.observers=[]},a=e.prototype,a.name="",a.observers=null,a.add=function(a){this.observers.indexOf(a)===d&&this.observers.push(a)},a.remove=function(c){var a=this.observers,b=a.indexOf(c);b!==d&&a.splice(b,1)},a.has=function(a){return this.observers.indexOf(a)!==d},a.trigger=function(b){var a,c=this.observers.slice(0),d=c.length;for(b[0]=this.name,a=0;d>a;a++)c[a].apply(i,b)},g=function(a){this.name=a,this.event=new e(a),this.events={}},a=g.prototype,a.name="",a.event=null,a.events={},a.add=function(d,a){var b=this.events,c=this.event;void 0!==a&&(b.hasOwnProperty(a)||(b[a]=new e(a)),c=b[a]),c.add(d)},a.remove=function(d,a){var b=this.events,c=this.event;void 0!==a&&(b.hasOwnProperty(a)||(b[a]=new e(a)),c=b[a]),c.remove(d)},a.trigger=function(a,b){var c,d=this.events;d.hasOwnProperty(a)&&(c=d[a],c.trigger(b)),this.event.trigger(b)},f="function",b=".",h=function(a){if(void 0===a)return this.events;var b=this.namespaces;return b.hasOwnProperty(a)||(b[a]=new g(a)),b[a]},c=function(){this.events=new g(""),this.namespaces={}},a=c.prototype,a.events=null,a.namespaces=null,c.prototype.on=function(a,e){var g,i,c,j;if(void 0===a||void 0===e)throw new TypeError("UndefinedError: On usage: on(topic, callback)");if(typeof e!==f)throw new TypeError("TypeError: Callback subscribing is of type "+typeof e+" not of type "+f);return c=a.lastIndexOf(b),a.charAt(0)===b&&1!==a.length?i=a.substr(1):c!==d&&c!==a.length-1?(i=a.substr(c+1),g=a.substr(0,c)):g=a,j=h.call(this,i),j.add(e,g),this},c.prototype.off=function(a,e){var g,i,c,j;if(void 0===a||void 0===e)throw new TypeError("UndefinedError: Off usage: on(topic, callback)");if(typeof e!==f)throw new TypeError("TypeError: Callback subscribing is of type "+typeof e+" not of type "+f);return c=a.lastIndexOf(b),a.charAt(0)===b&&1!==a.length?i=a.substr(1):c!==d&&c!==a.length-1?(i=a.substr(c+1),g=a.substr(0,c)):g=a,j=h.call(this,i),j.remove(e,g),this},c.prototype.trigger=function(a){var c,e,f=a.lastIndexOf(b),g=this.namespaces;if(a.charAt(0)===b&&1!==a.length)throw new TypeError("Error: triggering topic is a namespace and should be an event");return f!==d&&f!==a.length-1?(e=a.substr(f+1),c=a.substr(0,f)):c=a,e&&g.hasOwnProperty(e)&&g[e].trigger(c,arguments),this.events.trigger(c,arguments),this},c});
//# sourceMappingURL=EventBus.min.map