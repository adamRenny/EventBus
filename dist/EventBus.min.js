/**
 * EventBus Module
 * Copyright (c) 2012-2013 Adam Ranfelt
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without restriction,
 * including without limitation the rights to use, copy, modify, merge,
 * publish, distribute, sublicense, and/or sell copies of the Software,
 * and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(b,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a():b.EventBus=a()}(this,function(){"use strict";var g,a,c,e,b,h,f,d=-1;return"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(d,a){var b,c=this.length;if(!c)return-1;if(a=Number(a),("number"!=typeof a||isNaN(a))&&(a=0),a>=c)return-1;for(0>a&&(a=c-Math.abs(a)),b=a;c>b;b++)if(this[b]===d)return b;return-1}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b,d,c,e;if("function"!=typeof this)throw new TypeError("Target is not callable, and unable to be bound");return b=Array.prototype.slice,d=b.call(arguments,1),c=this,"undefined"==typeof a&&(a=c),e=function(){var e=b.call(arguments,0);c.apply(a,d.concat(e))}}),g=this,a=function(a){this.name=a,this.observers=[]},a.prototype.add=function(a){var b=this.observers;b.indexOf(a)===d&&b.push(a)},a.prototype.remove=function(c){var a=this.observers,b=a.indexOf(c);b!==d&&a.splice(b,1)},a.prototype.has=function(a){return this.observers.indexOf(a)!==d},a.prototype.trigger=function(b){var a=0,c=this.observers.slice(0),d=c.length;for(b[0]=this.name;d>a;a++)c[a].apply(g,b)},c=function(b){this.name=b,this.event=new a(b),this.events={}},c.prototype.add=function(e,b){var c,d=this.events;void 0!==b?(d.hasOwnProperty(b)||(d[b]=new a(b)),c=d[b]):c=this.event,c.add(e)},c.prototype.remove=function(e,b){var c,d=this.events;void 0!==b?(d.hasOwnProperty(b)||(d[b]=new a(b)),c=d[b]):c=this.event,c.remove(e)},c.prototype.trigger=function(a,b){var c,d=this.events;d.hasOwnProperty(a)&&(c=d[a],c.trigger(b)),this.event.trigger(b)},e="function",b=".",h=function(a){if(void 0===a)return this.events;var b=this.namespaces;return b.hasOwnProperty(a)||(b[a]=new c(a)),b[a]},f=function(){this.events=new c(""),this.namespaces={},this.getNamespace=h.bind(this)},f.prototype.on=function(a,f){var g,h,c,i;if(void 0===a||void 0===f)throw"UndefinedError: On usage: on(topic, callback)";if(typeof f!==e)throw"TypeError: Callback subscribing is of type "+typeof f+" not of type "+e;return c=a.lastIndexOf(b),a.charAt(0)===b&&1!==a.length?h=a.substr(1):c!==d&&c!==a.length-1?(h=a.substr(c+1),g=a.substr(0,c)):g=a,i=this.getNamespace(h),i.add(f,g),this},f.prototype.off=function(a,f){var g,h,c,i;if(void 0===a||void 0===f)throw"UndefinedError: Off usage: on(topic, callback)";if(typeof f!==e)throw"TypeError: Callback subscribing is of type "+typeof f+" not of type "+e;return c=a.lastIndexOf(b),a.charAt(0)===b&&1!==a.length?h=a.substr(1):c!==d&&c!==a.length-1?(h=a.substr(c+1),g=a.substr(0,c)):g=a,i=this.getNamespace(h),i.remove(f,g),this},f.prototype.trigger=function(a){var c,e,f=a.lastIndexOf(b),g=this.namespaces;if(a.charAt(0)===b&&1!==a.length)throw"Error: triggering topic is a namespace and should be an event";return f!==d&&f!==a.length-1?(e=a.substr(f+1),c=a.substr(0,f)):c=a,e&&g.hasOwnProperty(e)&&g[e].trigger(c,arguments),this.events.trigger(c,arguments),this},f});
//# sourceMappingURL=EventBus.min.map